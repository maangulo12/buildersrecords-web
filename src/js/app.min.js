!function(){"use strict";function t(t,e,r,o){t.otherwise("/"),e.html5Mode(!0),r.tokenGetter=function(t){return t.get("jwt")},o.interceptors.push("jwtInterceptor")}angular.module("app").config(t),t.$inject=["$urlRouterProvider","$locationProvider","jwtInterceptorProvider","$httpProvider"]}();
!function(){"use strict";angular.module("app",["ngMessages","ui.validate","ui.router","angular-jwt","angular-storage","smart-table","app.directive.email-availability","app.directive.format","app.directive.page-select","app.directive.username-availability","app.service.auth","app.service.category","app.service.chart","app.service.draw","app.service.expenditure","app.service.fund","app.service.item","app.service.project","app.service.stripe","app.service.subcontractor","app.service.user","app.service.utility","app.home","app.login","app.signup","app.tutorial","app.projects","app.projects.overview","app.projects.budget","app.projects.funds","app.projects.expenditures","app.projects.subcontractors","app.account","app.account.billing"])}();
!function(){"use strict";function t(t,e,r,o){function a(t,a){a.data&&a.data.requiresLogin&&(!r.get("jwt")||o.isTokenExpired(r.get("jwt")))&&(t.preventDefault(),e.go("login"))}r.set("url","https://buildersrecords-api-staging.herokuapp.com"),Stripe.setPublishableKey("pk_test_KY3H8e295UxwoHrrqHBobKRC"),t.$on("$stateChangeStart",a)}angular.module("app").run(t),t.$inject=["$rootScope","$state","store","jwtHelper"]}();
!function(){"use strict";function i(i,t){function e(e,a,l,n){n.$asyncValidators.emailAvailability=function(e){function a(i){return t.verifyEmail(i)}function l(t){return n.$setValidity("emailAvailability",!0),i.resolve(t)}function r(t){return n.$setValidity("emailAvailability",!1),i.reject(t)}return a(e).then(l)["catch"](r)}}var a={restrict:"A",require:"ngModel",link:e};return a}angular.module("app.directive.email-availability",[]).directive("emailAvailability",i),i.$inject=["$q","utilityService"]}();
!function(){"use strict";function r(r){function t(t,e,n,i){function u(t){return r(n.format)(i.$modelValue)}function a(t){var i=t.replace(/[^\d|\-+|\.+]/g,"");return e.val(r(n.format)(i)),i}i.$formatters.unshift(u),i.$parsers.unshift(a)}var e={restrict:"A",require:"ngModel",link:t};return e}angular.module("app.directive.format",[]).directive("format",r),r.$inject=["$filter"]}();
!function(){"use strict";function e(){function e(e,t,n,a){e.$watch("currentPage",function(t){e.inputPage=t})}var t={restrict:"E",template:'<input type="text" class="select-page" ng-model="inputPage" ng-change="selectPage(inputPage)">',link:e};return t}angular.module("app.directive.page-select",[]).directive("pageSelect",e)}();
!function(){"use strict";function i(i,e){function t(t,n,r,a){a.$asyncValidators.usernameAvailability=function(t){function n(i){return e.verifyUsername(i)}function r(e){return a.$setValidity("usernameAvailability",!0),i.resolve(e)}function u(e){return a.$setValidity("usernameAvailability",!1),i.reject(e)}return n(t).then(r)["catch"](u)}}var n={restrict:"A",require:"ngModel",link:t};return n}angular.module("app.directive.username-availability",[]).directive("usernameAvailability",i),i.$inject=["$q","utilityService"]}();
!function(){"use strict";function t(t,e,r,n){function u(u,i){function c(t){var u=t.data.token,a=r.decodeToken(u),i={id:a.user_id,stripe:a.stripe_id};return e.set("jwt",u),e.set("user",i),n.resolve(t)}function o(t){return n.reject(t)}var s={login:u,password:i};return t.post(a,s).then(c)["catch"](o)}var a=e.get("url")+"/api/auth",i={authenticate:u};return i}angular.module("app.service.auth",[]).factory("authService",t),t.$inject=["$http","store","jwtHelper","$q"]}();
!function(){"use strict";function e(e,t,r){function c(){return e.get(g+p("project_id","equals",t.get("project").id)).then(a)["catch"](u)}function n(r){var c={name:r,project_id:t.get("project").id};return e.post(g,c).then(a)["catch"](u)}function o(r){var c={name:r,project_id:t.get("project").id};return e.put(g+"/"+t.get("category").id,c).then(a)["catch"](u)}function i(){return e["delete"](g+"/"+t.get("category").id).then(a)["catch"](u)}function a(e){return r.resolve(e)}function u(e){return r.reject(e)}function p(e,t,r){return'?q={"filters":[{"name":"'+e+'","op":"'+t+'","val":"'+r+'"}]}'}var g=t.get("url")+"/api/categories",d={retrieveList:c,create:n,update:o,remove:i};return d}angular.module("app.service.category",[]).factory("categoryService",e),e.$inject=["$http","store","$q"]}();
!function(){"use strict";function e(){function e(){return{chart:{type:"pie",style:{fontFamily:"Montserrat, 'Helvetica Neue', Helvetica, Arial, sans-serif"}},title:{text:""},tooltip:{headerFormat:'<span style="font-size: 14px"> {point.key} </span><br>',pointFormat:'<span style="font-size: 14px"> <b> ${point.y:.2f} </b> </span><br>'},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:'<span style="font-size: 11px"> {point.name} </span><br> {point.percentage:.2f}%'}}},series:[{name:"Categories",data:[]}],credits:{enabled:!1}}}var t={setPieChartOptions:e};return t}angular.module("app.service.chart",[]).factory("chartService",e)}();
!function(){"use strict";function t(t,e,n){function r(n){var r={date:n.date,amount:n.amount,fund_id:e.get("fund").id};return t.post(f,r).then(c)["catch"](i)}function u(n){var r={date:n.date,amount:n.amount,fund_id:e.get("fund").id};return t.put(f+"/"+e.get("draw").id,r).then(c)["catch"](i)}function a(e){return t["delete"](f+"/"+e).then(c)["catch"](i)}function d(){return t["delete"](f+o("fund_id","equals",e.get("fund").id)).then(c)["catch"](i)}function c(t){return n.resolve(t)}function i(t){return n.reject(t)}function o(t,e,n){return'?q={"filters":[{"name":"'+t+'","op":"'+e+'","val":"'+n+'"}]}'}var f=e.get("url")+"/api/draws",h={create:r,update:u,remove:a,removeByFund:d};return h}angular.module("app.service.draw",[]).factory("drawService",t),t.$inject=["$http","store","$q"]}();
!function(){"use strict";function e(e,t,r,n){function i(){return e.get(f+s("project_id","equals",t.get("project").id)).then(y)["catch"](g)}function d(r){var i={date:n("date")(r.date,"yyyy-MM-dd"),vendor:r.vendor,notes:r.notes,cost:r.cost,fund_id:r.fund.id,category_id:r.item.category.id,item_id:r.item.id,project_id:t.get("project").id};return e.post(f,i).then(y)["catch"](g)}function c(r){var i={date:n("date")(r.date,"yyyy-MM-dd"),vendor:r.vendor,notes:r.notes,cost:r.cost,fund_id:r.fund.id,category_id:r.item.category.id,item_id:r.item.id,project_id:t.get("project").id};return e.put(f+"/"+t.get("expenditure").id,i).then(y)["catch"](g)}function o(t){return e["delete"](f+"/"+t).then(y)["catch"](g)}function u(){return e.get(f+s("category_id","equals",t.get("category").id)).then(y)["catch"](g)}function a(){return e["delete"](f+s("category_id","equals",t.get("category").id)).then(y)["catch"](g)}function y(e){return r.resolve(e)}function g(e){return r.reject(e)}function s(e,t,r){return'?q={"filters":[{"name":"'+e+'","op":"'+t+'","val":"'+r+'"}]}'}var f=t.get("url")+"/api/expenditures",p={retrieveList:i,create:d,update:c,remove:o,retrieveByCategory:u,removeByCategory:a};return p}angular.module("app.service.expenditure",[]).factory("expenditureService",e),e.$inject=["$http","store","$q","$filter"]}();
!function(){"use strict";function t(t,e,n){function r(){return t.get(f+d("project_id","equals",e.get("project").id)).then(a)["catch"](i)}function u(n){var r={name:n.name,loan:n.loan,amount:n.amount,project_id:e.get("project").id};return t.post(f,r).then(a)["catch"](i)}function c(n){var r={name:n.name,amount:n.amount,project_id:e.get("project").id};return t.put(f+"/"+e.get("fund").id,r).then(a)["catch"](i)}function o(){return t["delete"](f+"/"+e.get("fund").id).then(a)["catch"](i)}function a(t){return n.resolve(t)}function i(t){return n.reject(t)}function d(t,e,n){return'?q={"filters":[{"name":"'+t+'","op":"'+e+'","val":"'+n+'"}]}'}var f=e.get("url")+"/api/funds",p={retrieveList:r,create:u,update:c,remove:o};return p}angular.module("app.service.fund",[]).factory("fundService",t),t.$inject=["$http","store","$q"]}();
!function(){"use strict";function e(e,t,r){function c(){return e.get(p+s("project_id","equals",t.get("project").id)).then(d)["catch"](g)}function i(r){var c={name:r.name,description:r.description,estimated:r.estimated,actual:r.actual,category_id:r.category,project_id:t.get("project").id};return e.post(p,c).then(d)["catch"](g)}function n(r){var c={name:r.name,description:r.description,estimated:r.estimated,actual:r.actual,category_id:r.category.id,project_id:t.get("project").id};return e.put(p+"/"+t.get("item").id,c).then(d)["catch"](g)}function a(t){return e["delete"](p+"/"+t).then(d)["catch"](g)}function o(){return e.get(p+s("category_id","equals",t.get("category").id)).then(d)["catch"](g)}function u(){return e["delete"](p+s("category_id","equals",t.get("category").id)).then(d)["catch"](g)}function d(e){return r.resolve(e)}function g(e){return r.reject(e)}function s(e,t,r){return'?q={"filters":[{"name":"'+e+'","op":"'+t+'","val":"'+r+'"}]}'}var p=t.get("url")+"/api/items",m={retrieveList:c,create:i,update:n,remove:a,retrieveByCategory:o,removeByCategory:u};return m}angular.module("app.service.item",[]).factory("itemService",e),e.$inject=["$http","store","$q"]}();
!function(){"use strict";function e(e,t,r){function n(){return e.get(d+o("user_id","equals",t.get("user").id)).then(u)["catch"](a)}function c(r){var n={name:r.name,address:r.address,city:r.city,state:r.state,zipcode:r.zipcode,home_sq:r.homeSq,project_type:r.type,user_id:t.get("user").id};return e.post(d,n).then(u)["catch"](a)}function i(r){var n={name:r.name,address:r.address,city:r.city,state:r.state,zipcode:r.zipcode,home_sq:r.homeSq,user_id:t.get("user").id};return e.put(d+"/"+r.id,n).then(u)["catch"](a)}function s(t){return e["delete"](d+"/"+t.id).then(u)["catch"](a)}function u(e){return r.resolve(e)}function a(e){return r.reject(e)}function o(e,t,r){return'?q={"filters":[{"name":"'+e+'","op":"'+t+'","val":"'+r+'"}]}'}var d=t.get("url")+"/api/projects",p={retrieveList:n,create:c,update:i,remove:s};return p}angular.module("app.service.project",[]).factory("projectService",e),e.$inject=["$http","store","$q"]}();
!function(){"use strict";function e(e,r,t){function n(e){var r=Stripe.card.validateCardNumber(e.cardNumber),t=Stripe.card.validateExpiry(e.expMonth,e.expYear),n=Stripe.card.validateCVC(e.cvc);return r&&t&&n?!0:!1}function a(e){var r={number:e.cardNumber,cvc:e.cvc,exp_month:e.expMonth,exp_year:e.expYear,name:e.cardName.toUpperCase()};return t(function(e,t){function n(r,n){return n.error?t(n):e(n)}Stripe.card.createToken(r,n)})}function i(r,t){var n={email:r.email,username:r.username,password:r.password,plan:r.plan,token_id:t};return e.post(s,n).then(p)["catch"](o)}function c(){return e.get(s+"/"+r.get("user").stripe).then(p)["catch"](o)}function u(t){var n={stripe_id:r.get("user").stripe,token_id:t};return e.put(s+"/"+r.get("user").stripe,n).then(p)["catch"](o)}function p(e){return t.resolve(e)}function o(e){return t.reject(e)}var s=r.get("url")+"/api/stripe",d={validateCard:n,createCardToken:a,createSubscription:i,retrieveSubscription:c,updateSubscription:u};return d}angular.module("app.service.stripe",[]).factory("stripeService",e),e.$inject=["$http","store","$q"]}();
!function(){"use strict";function t(t,e,n){function c(){return t.get(m+p("project_id","equals",e.get("project").id)).then(u)["catch"](i)}function r(n){var c={name:n.name,company:n.company,contact_number:n.contactNumber,project_id:e.get("project").id};return t.post(m,c).then(u)["catch"](i)}function o(n){var c={name:n.name,company:n.company,contact_number:n.contactNumber,project_id:e.get("project").id};return t.put(m+"/"+n.id,c).then(u)["catch"](i)}function a(e){return console.log(e.id),t["delete"](m+"/"+e.id).then(u)["catch"](i)}function u(t){return n.resolve(t)}function i(t){return n.reject(t)}function p(t,e,n){return'?q={"filters":[{"name":"'+t+'","op":"'+e+'","val":"'+n+'"}]}'}var m=e.get("url")+"/api/subcontractors",s={retrieveList:c,create:r,update:o,remove:a};return s}angular.module("app.service.subcontractor",[]).factory("subcontractorService",t),t.$inject=["$http","store","$q"]}();
!function(){"use strict";function e(e,t,r){function u(){return e.get(i+"/"+t.get("user").id).then(s)["catch"](a)}function n(r){var u={email:r.email,username:r.username};return e.put(i+"/"+t.get("user").id,u).then(s)["catch"](a)}function c(r){return e.put(i+"/"+t.get("user").id,{password:r}).then(s)["catch"](a)}function s(e){return r.resolve(e)}function a(e){return r.reject(e)}var i=t.get("url")+"/api/users",o={retrieve:u,updateUser:n,updatePassword:c};return o}angular.module("app.service.user",[]).factory("userService",e),e.$inject=["$http","store","$q"]}();
!function(){"use strict";function e(e,t,n){function r(t){return e.post(c+"/email",{email:t}).then(p)["catch"](u)}function a(t){return e.post(c+"/username",{username:t}).then(p)["catch"](u)}function i(n,r){var a=new FormData;a.append("file",r),a.append("name",n.name),a.append("address",n.address),a.append("city",n.city),a.append("state",n.state),a.append("zipcode",n.zipcode),a.append("home_sq",n.homeSq),a.append("project_type",n.type),a.append("user_id",t.get("user").id);var i={transformRequest:angular.identity,headers:{"Content-Type":void 0}};return e.post(c+"/ubuildit",a,i).then(p)["catch"](u)}function p(e){return n.resolve(e)}function u(e){return n.reject(e)}var c=t.get("url")+"/api/utility",s={verifyEmail:r,verifyUsername:a,parseUbuilditFile:i};return s}angular.module("app.service.utility",[]).factory("utilityService",e),e.$inject=["$http","store","$q"]}();
!function(){"use strict";function t(t,n,u){var o=this;o.account={},o.account.email=n.email,o.account.username=n.username,t.updateAccount=function(){function n(){return u.updateUser(o.account)}function c(t){o.updateAccountSuccess=!0,a.button("reset")}function e(){t.accountForm.$invalid=!0,o.updateAccountError=!0,a.button("reset")}var a=$("#update-account-button").button("loading");n().then(c)["catch"](e)},t.updatePassword=function(){function n(){return u.updatePassword(o.account.newPassword)}function c(t){o.updatePasswordSuccess=!0,a.button("reset")}function e(n){t.passwordForm.$invalid=!0,o.updatePasswordError=!0,a.button("reset")}var a=$("#update-password-button").button("loading");n().then(c)["catch"](e)}}angular.module("app.account").controller("AccountController",t),t.$inject=["$scope","User","userService"]}();
!function(){"use strict";angular.module("app.account",[])}();
!function(){"use strict";function t(t){t.state("account",{url:"/account",resolve:{User:function(t,n){function a(t){return t.data}function e(t){return n.reject(t.data)}return t.retrieve().then(a)["catch"](e)}},views:{nav:{templateUrl:"static/angular/partials/navs/nav2.html",controller:function(t,n){t.username=n.username}},body:{templateUrl:"static/angular/modules/account/account.html",controller:"AccountController",controllerAs:"vm"}},data:{requiresLogin:!0}})}angular.module("app.account").config(t)}();
!function(){"use strict";function t(t,a){function d(){function t(t){n.card={},n.card.name=t.data.sources.data[0].name,n.card.last4=t.data.sources.data[0].last4,n.card.brand=t.data.sources.data[0].brand,n.plan=t.data.subscriptions.data[0].plan.id}function d(t){n.errorMsgGet=!0}return a.retrieveSubscription().then(t)["catch"](d)}var n=this;d(),t.showUpdateCardModal=function(){n.updatedCard={},t.editCardForm.$setPristine(),$("#edit-card-modal").modal("show")},t.updateCard=function(){function r(){return a.createCardToken(n.updatedCard)}function e(t){return a.updateSubscription(t.id)}function i(t){$("#edit-card-modal").modal("hide"),c.button("reset"),d()}function o(){t.editCardForm.$invalid=!0,c.button("reset")}var c=$("#update-card-button").button("loading"),u=a.validateCard(n.updatedCard);u?r().then(e).then(i)["catch"](o):o()}}angular.module("app.account.billing").controller("BillingController",t),t.$inject=["$scope","stripeService"]}();
!function(){"use strict";angular.module("app.account.billing",[])}();
!function(){"use strict";function n(n){n.state("billing",{url:"/account/billing",resolve:{User:function(n,t){function l(n){return n.data}function e(n){return t.reject(n.data)}return n.retrieve().then(l)["catch"](e)}},views:{nav:{templateUrl:"static/angular/partials/navs/nav2.html",controller:function(n,t){n.username=t.username}},body:{templateUrl:"static/angular/modules/billing/billing.html",controller:"BillingController",controllerAs:"vm"}},data:{requiresLogin:!0}})}angular.module("app.account.billing").config(n)}();
!function(){"use strict";function t(t,e,n,o,r){function a(){function t(){function t(t){return i.categoryList=t.data.objects,i.categoryList}return n.retrieveList().then(t)}function e(){var t=0,e=0;angular.forEach(i.categoryList,function(n){var o=0,r=0;angular.forEach(n.items,function(t){o+=t.estimated,r+=t.actual}),n.totalEstimated=o,n.totalActual=r,t+=o,e+=r}),i.grandTotalEstimated=t,i.grandTotalActual=e}function o(t){i.getError=!0}return t().then(e)["catch"](o)}var i=this;i.project=e.get("project"),a(),t.clickedItem=function(t){var n=e.get("category").items.indexOf(t);return-1!==n?(e.set("item",t),!0):!1},t.clickedSingleCheckbox=function(t,e){if(e.selected)i.selected=!0;else{var n=!1;angular.forEach(t.items,function(t){t.selected&&(n=!0)}),i.selected=n}},t.clickedCategory=function(t){var n=i.categoryList.indexOf(t);return-1!==n?(e.set("category",t),!0):!1},t.showAddItemModal=function(){i.item={},i.item.estimated=0,i.item.actual=0,t.addItemForm.$setPristine(),$("#add-item-modal").modal("show")},t.addItem=function(){function e(){return n.create(i.item.newCategory)}function r(t){i.item.category=t.id}function d(){return o.create(i.item)}function c(){$("#add-item-modal").modal("hide"),m.button("reset"),a()}function u(){t.addItemForm.$invalid=!0,m.button("reset")}var m=$("#add-item-button").button("loading");i.item.newCategory?e().then(r).then(d).then(c)["catch"](u):d().then(c)["catch"](u)},t.showDeleteItemsModal=function(){$("#delete-button").hasClass("disabled")||(i.errorMsgDeleteItems=!1,$("#delete-items-modal").modal("show"))},t.deleteItems=function(){function t(t){return o.remove(t)}function e(){$("#delete-items-modal").modal("hide"),r.button("reset"),i.selected=!1,a()}function n(){i.errorMsgDeleteItems=!0,r.button("reset")}var r=$("#delete-items-button").button("loading");angular.forEach(i.categoryList,function(o){angular.forEach(o.items,function(o){o.selected&&t(o.id).then(e)["catch"](n)})})},t.showDeleteItemModal=function(){i.errorMsgDeleteItem=!1,$("#delete-item-modal").modal("show")},t.deleteItem=function(){function t(){return o.remove(e.get("item").id)}function n(){$("#delete-item-modal").modal("hide"),d.button("reset"),a()}function r(){i.errorMsgDeleteItem=!0,d.button("reset")}var d=$("#delete-item-button").button("loading");t().then(n)["catch"](r)},t.showEditItemModal=function(){i.updatedItem={},i.updatedItem.category={id:e.get("category").id,name:e.get("category").name},i.updatedItem.name=e.get("item").name,i.updatedItem.description=e.get("item").description,i.updatedItem.estimated=e.get("item").estimated,i.updatedItem.actual=e.get("item").actual,t.editItemForm.$setPristine(),$("#edit-item-modal").modal("show")},t.updateItem=function(){function e(){return o.update(i.updatedItem)}function n(){$("#edit-item-modal").modal("hide"),d.button("reset"),a()}function r(){t.editItemForm.$invalid=!0,d.button("reset")}var d=$("#update-item-button").button("loading");e().then(n)["catch"](r)},t.showDeleteCategoryModal=function(){i.errorMsgDeleteCategory=!1,$("#delete-category-modal").modal("show")},t.deleteCategory=function(){function t(){return r.retrieveByCategory()}function e(t){console.log(t.num_results),y=t.num_results}function d(){return o.retrieveByCategory()}function c(t){console.log(t.num_results),b=t.num_results}function u(){return 0===y&&0===b?s():0!==y&&0!==b?m().then(l).then(s):0!==y&&0===b?m().then(s):(console.log("MADE IT"),l().then(s))}function m(){return r.removeByCategory()}function l(){return o.removeByCategory()}function s(){return n.remove()}function g(){$("#delete-category-modal").modal("hide"),h.button("reset"),a()}function f(){i.errorMsgDeleteCategory=!0,h.button("reset")}var h=$("#delete-category-button").button("loading"),y=0,b=0;t().then(e).then(d).then(c).then(u).then(g)["catch"](f)},t.showEditCategoryModal=function(){i.category={},i.category.name=e.get("category").name,t.editCategoryForm.$setPristine(),$("#edit-category-modal").modal("show")},t.updateCategory=function(){function e(){return n.update(i.category.name)}function o(){$("#edit-category-modal").modal("hide"),d.button("reset"),a()}function r(){t.editCategoryForm.$invalid=!0,d.button("reset")}var d=$("#update-category-button").button("loading");e().then(o)["catch"](r)}}angular.module("app.projects.budget").controller("BudgetController",t),t.$inject=["$scope","store","categoryService","itemService","expenditureService"]}();

!function(){"use strict";angular.module("app.projects.budget",[])}();
!function(){"use strict";function t(t){t.state("budget",{url:"/projects/budget",resolve:{User:e},views:{nav:{templateUrl:"static/angular/partials/navs/nav2.html",controller:r,controllerAs:"vm"},body:{templateUrl:"static/angular/modules/budget/budget.html",controller:"BudgetController",controllerAs:"vm"}},data:{requiresLogin:!0}})}function e(t,e){function r(){return t.retrieve()}function n(t){return e.resolve(t.data)}function u(t){return e.reject(t)}return r().then(n)["catch"](u)}function r(t){var e=this;e.username=t.username}angular.module("app.projects.budget").config(t)}();
!function(){"use strict";function e(e,t,n,i,r,d){function o(){function e(){function e(e){return s.expenditureList=e.objects,s.expenditureList}return n.retrieveList().then(e)}function t(){var e=0;angular.forEach(s.expenditureList,function(t){e+=t.cost}),s.totalCost=e}function i(){s.getError=!0}e().then(t)["catch"](i)}function u(){function e(){function e(e){return s.subcontractorList=e.objects,s.subcontractorList}function t(){s.getError=!0}return i.retrieveList().then(e)["catch"](t)}return e()}function a(){function e(){function e(e){return s.itemList=e.objects,s.itemList}return r.retrieveList().then(e)}function t(){var e=[];angular.forEach(s.itemList,function(t){e.push({id:t.id,name:t.name,category:{id:t.categories.id,name:t.categories.name}})}),s.itemList=e}function n(){s.getError=!0}return e().then(t)["catch"](n)}function c(){function e(){function e(e){return s.fundList=e.objects,s.fundList}return d.retrieveList().then(e)}function t(){var e=[];angular.forEach(s.fundList,function(t){e.push({id:t.id,name:t.name})}),s.fundList=e}function n(){s.getError=!0}return e().then(t)["catch"](n)}var s=this;s.project=t.get("project"),o(),u(),a(),c(),e.clicked=function(e){var n=s.expenditureList.indexOf(e);return-1!==n?(t.set("expenditure",e),!0):!1},e.clickedCheckbox=function(e){if(e.selected)s.selected=!0;else{var t=!1;angular.forEach(s.expenditureList,function(e){e.selected&&(t=!0)}),s.selected=t}},e.addModal=function(){s.expenditure={},s.expenditure.date=new Date,e.addForm.$setPristine(),$("#add-modal").modal("show")},e.add=function(){function t(){return n.create(s.expenditure)}function i(){$("#add-modal").modal("hide"),d.button("reset"),o()}function r(){e.addForm.$invalid=!0,d.button("reset")}var d=$("#add-button").button("loading");1==s.expenditure.question&&(s.expenditure.vendor=s.expenditure.subcontractor.name),t().then(i)["catch"](r)},e.deleteManyModal=function(){$("#delete-many-button1").hasClass("disabled")||(s.deleteManyError=!1,$("#delete-many-modal").modal("show"))},e["delete"]=function(){function e(e){return n.remove(e)}function t(){$("#delete-many-modal").modal("hide"),r.button("reset"),s.selected=!1}function i(){s.deleteManyError=!0,r.button("reset")}var r=$("#delete-many-button2").button("loading");angular.forEach(s.expenditureList,function(n){if(n.selected){e(n.id).then(t)["catch"](i);var r=s.expenditureList.indexOf(n);-1!==r&&s.expenditureList.splice(r,1)}})},e.deleteModal=function(){s.deleteError=!1,$("#delete-modal").modal("show")},e["delete"]=function(){function e(){return n.remove(t.get("expenditure").id)}function i(){$("#delete-modal").modal("hide"),d.button("reset");var e=s.expenditureList.indexOf(t.get("expenditure"));-1!==e&&s.expenditureList.splice(e,1)}function r(){s.deleteError=!0,d.button("reset")}var d=$("#delete-button").button("loading");e().then(i)["catch"](r)},e.updateModal=function(){s.updated={},s.updated.date=new Date(t.get("expenditure").date),s.updated.vendor=t.get("expenditure").vendor,s.updated.item={id:t.get("expenditure").items.id,name:t.get("expenditure").items.name,category:{id:t.get("expenditure").categories.id,name:t.get("expenditure").categories.name}},s.updated.notes=t.get("expenditure").notes,s.updated.cost=t.get("expenditure").cost,s.updated.fund={id:t.get("expenditure").funds.id,name:t.get("expenditure").funds.name},e.updateForm.$setPristine(),$("#update-modal").modal("show")},e.update=function(){function t(){return n.update(s.updated)}function i(){$("#update-modal").modal("hide"),d.button("reset"),o()}function r(){e.updateForm.$invalid=!0,d.button("reset")}var d=$("#update-button").button("loading");t().then(i)["catch"](r)}}angular.module("app.projects.expenditures").controller("ExpendituresController",e),e.$inject=["$scope","store","expenditureService","subcontractorService","itemService","fundService"]}();
!function(){"use strict";angular.module("app.projects.expenditures",[])}();
!function(){"use strict";function e(e){e.state("expenditures",{url:"/projects/expenditures",resolve:{User:function(e,t){function r(e){return e.data}function n(e){return t.reject(e.data)}return e.retrieve().then(r)["catch"](n)}},views:{nav:{templateUrl:"static/angular/partials/navs/nav2.html",controller:function(e,t){e.username=t.username}},body:{templateUrl:"static/angular/modules/expenditures/expenditures.html",controller:"ExpendituresController",controllerAs:"vm"}},data:{requiresLogin:!0}})}angular.module("app.projects.expenditures").config(e)}();
!function(){"use strict";function t(t,n,e,d){function a(){function t(){function t(t){return o.fundList=t.data.objects,o.fundList}return e.retrieveList().then(t)}function n(){angular.forEach(o.fundList,function(t){var n=0,e=0;angular.forEach(t.expenditures,function(t){n+=t.cost}),angular.forEach(t.draws,function(t){e+=t.amount}),t.totalExpenditure=n,t.totalDraw=e,t.spent=Math.round(n/t.amount*100),t.left=Math.round((t.amount-n)/t.amount*100),t.drawReceived=Math.round(e/t.amount*100),t.drawLeft=Math.round((t.amount-e)/t.amount*100)})}function d(t){o.errorMsgGet=!0}return t().then(n)["catch"](d)}var o=this;o.project=n.get("project"),a(),t.clickedFund=function(t){var e=o.fundList.indexOf(t);return-1!==e?(n.set("fund",t),!0):!1},t.clickedDraw=function(t){var e=n.get("fund").draws.indexOf(t);return-1!==e?(n.set("draw",t),!0):!1},t.clickedAllCheckbox=function(){angular.forEach(n.get("fund").draws,function(t){t.selected=n.get("fund").checkboxAll,n.get("fund").selected=t.selected})},t.clickedSingleCheckbox=function(t){if(t.selected)n.get("fund").selected=!0;else{var e=!1;angular.forEach(n.get("fund").draws,function(t){t.selected&&(e=!0)}),n.get("fund").selected=e}},t.showAddFundModal=function(){o.fund={},o.loanQuestion=[{value:!0,name:"Yes"},{value:!1,name:"No"}],t.addFundForm.$setPristine(),$("#add-fund-modal").modal("show")},t.addFund=function(){function n(){return e.create(o.fund)}function d(t){$("#add-fund-modal").modal("hide"),r.button("reset"),a()}function u(n){t.addFundForm.$invalid=!0,r.button("reset")}var r=$("#add-fund-button").button("loading");n().then(d)["catch"](u)},t.showDeleteFundModal=function(){o.errorMsgDelete=!1,$("#delete-fund-modal").modal("show")},t.deleteFund=function(){function t(){return d.removeByFund()}function u(){return e.remove()}function r(t){$("#delete-fund-modal").modal("hide"),c.button("reset"),a()}function i(t){o.errorMsgDelete=!0,c.button("reset")}var c=$("#delete-fund-button").button("loading");0===n.get("fund").draws?u().then(r)["catch"](i):t().then(u).then(r)["catch"](i)},t.showEditFundModal=function(){o.updatedFund={},o.updatedFund.name=n.get("fund").name,o.updatedFund.amount=n.get("fund").amount,t.editFundForm.$setPristine(),$("#edit-fund-modal").modal("show")},t.updateFund=function(){function n(){return e.update(o.updatedFund)}function d(t){$("#edit-fund-modal").modal("hide"),r.button("reset"),a()}function u(n){t.editFundForm.$invalid=!0,r.button("reset")}var r=$("#update-fund-button").button("loading");n().then(d)["catch"](u)},t.showAddDrawModal=function(){o.draw={},o.draw.date=new Date,t.addDrawForm.$setPristine(),$("#add-draw-modal").modal("show")},t.addDraw=function(){function n(){return d.create(o.draw)}function e(t){$("#add-draw-modal").modal("hide"),r.button("reset"),a()}function u(n){t.addDrawForm.$invalid=!0,r.button("reset")}var r=$("#add-draw-button").button("loading");n().then(e)["catch"](u)},t.showDeleteDrawsModal=function(){n.get("fund").selected&&(o.errorMsgDeleteDraws=!1,$("#delete-draws-modal").modal("show"))},t.deleteDraws=function(){function t(t){return d.remove(t)}function e(t){$("#delete-draws-modal").modal("hide"),r.button("reset"),a()}function u(t){o.errorMsgDeleteDraws=!0,r.button("reset")}var r=$("#delete-draw-button").button("loading");angular.forEach(n.get("fund").draws,function(n){n.selected&&t(n.id).then(e)["catch"](u)})},t.showEditDrawModal=function(){o.updatedDraw={},o.updatedDraw.date=new Date(n.get("draw").date),o.updatedDraw.amount=n.get("draw").amount,t.editDrawForm.$setPristine(),$("#edit-draw-modal").modal("show")},t.updateDraw=function(){function n(){return d.update(o.updatedDraw)}function e(t){$("#edit-draw-modal").modal("hide"),r.button("reset"),a()}function u(n){t.editDrawForm.$invalid=!0,r.button("reset")}var r=$("#update-draw-button").button("loading");n().then(e)["catch"](u)}}angular.module("app.projects.funds").controller("FundsController",t),t.$inject=["$scope","store","fundService","drawService"]}();
!function(){"use strict";angular.module("app.projects.funds",[])}();
!function(){"use strict";function t(t){t.state("funds",{url:"/projects/funds",resolve:{User:function(t,n){function e(t){return t.data}function r(t){return n.reject(t.data)}return t.retrieve().then(e)["catch"](r)}},views:{nav:{templateUrl:"static/angular/partials/navs/nav2.html",controller:function(t,n){t.username=n.username}},body:{templateUrl:"static/angular/modules/funds/funds.html",controller:"FundsController",controllerAs:"vm"}},data:{requiresLogin:!0}})}angular.module("app.projects.funds").config(t)}();
!function(){"use strict";function o(o){o.remove("jwt")}angular.module("app.home").controller("HomeController",o),o.$inject=["store"]}();
!function(){"use strict";angular.module("app.home",[])}();
!function(){"use strict";function t(t){t.state("home",{url:"/",views:{nav:{templateUrl:"static/angular/partials/navs/nav1.html"},body:{templateUrl:"static/angular/modules/home/home.html",controller:"HomeController",controllerAs:"vm"}}})}angular.module("app.home").config(t)}();
!function(){"use strict";function t(t,n,o,e){var r=this;n.remove("jwt"),t.logIn=function(){function n(){return e.authenticate(r.username,r.password)}function i(){o.go("projects")}function u(){t.loginForm.$invalid=!0,r.password="",a.button("reset")}var a=$("#login-button").button("loading");n().then(i)["catch"](u)}}angular.module("app.login").controller("LoginController",t),t.$inject=["$scope","store","$state","authService"]}();
!function(){"use strict";angular.module("app.login",[])}();
!function(){"use strict";function l(l){l.state("login",{url:"/login",views:{nav:{templateUrl:"static/angular/partials/navs/nav1.html"},body:{templateUrl:"static/angular/modules/login/login.html",controller:"LoginController",controllerAs:"vm"}}})}angular.module("app.login").config(l)}();
!function(){"use strict";function t(t,a,n,r){function e(){function t(){function t(t){return i.categoryList=t.data.objects,i.categoryList}return n.retrieveList().then(t)}function a(){angular.forEach(i.categoryList,function(t){var a=0,n=0;angular.forEach(t.expenditures,function(t){a+=t.cost}),angular.forEach(t.items,function(t){n+=t.actual}),t.totalExpenditure=a,t.totalBudget=n,0===n&&a>n?(t.spent=100,t.left=0):(t.spent=Math.round(a/n*100),t.left=Math.round((n-a)/n*100))})}function r(){c.series[0].data=[],0===i.categoryList.length?c.series[0].data.push({name:"No Data",y:.01}):angular.forEach(i.categoryList,function(t){if(0!==t.items.length){var a=0;angular.forEach(t.items,function(t){a+=t.actual}),c.series[0].data.push({name:t.name,y:a})}}),$("#piechart-container").highcharts(c)}function e(){var t=0,a=0,n=0;angular.forEach(i.categoryList,function(r){var e=0,o=0,u=0;angular.forEach(r.items,function(t){e+=t.estimated,o+=t.actual}),angular.forEach(r.expenditures,function(t){u+=t.cost}),r.totalEstimated=e,r.totalActual=o,r.totalExpenditure=u,t+=e,a+=o,n+=u,u>=o?(r.paid=100,r.unpaid=0):(r.paid=Math.round(u/o*100),r.unpaid=o-u)}),i.grandTotalEstimated=t,i.grandTotalActual=a,i.grandTotalExpenditure=n,i.grandTotalSpent=Math.round(n/a*100),i.grandTotalLeft=Math.round((a-n)/a*100)}return t().then(a).then(r).then(e)["catch"](u)}function o(){function t(){function t(t){return i.fundList=t.data.objects,i.fundList}return r.retrieveList().then(t)}function a(){angular.forEach(i.fundList,function(t){var a=0,n=0;angular.forEach(t.expenditures,function(t){a+=t.cost}),angular.forEach(t.draws,function(t){n+=t.amount}),t.totalExpenditure=a,t.totalDraw=n,t.spent=Math.round(a/t.amount*100),t.left=Math.round((t.amount-a)/t.amount*100),t.drawReceived=Math.round(n/t.amount*100),t.drawLeft=Math.round((t.amount-n)/t.amount*100)})}return t().then(a)["catch"](u)}function u(){i.getError=!0}var i=this;i.project=t.get("project");var c=a.setPieChartOptions();e(),o()}angular.module("app.projects.overview").controller("OverviewController",t),t.$inject=["store","chartService","categoryService","fundService"]}();
!function(){"use strict";angular.module("app.projects.overview",[])}();
!function(){"use strict";function e(e){e.state("overview",{url:"/projects/overview",resolve:{User:r},views:{nav:{templateUrl:"static/angular/partials/navs/nav2.html",controller:t,controllerAs:"vm"},body:{templateUrl:"static/angular/modules/overview/overview.html",controller:"OverviewController",controllerAs:"vm"}},data:{requiresLogin:!0}})}function r(e,r){function t(){return e.retrieve()}function n(e){return r.resolve(e.data)}function o(e){return r.reject(e)}return t().then(n)["catch"](o)}function t(e){var r=this;r.username=e.username}angular.module("app.projects.overview").config(e)}();
!function(){"use strict";function t(t,e,o,d){function n(){function t(){return o.retrieveList()}function e(t){return r.projectList=t.data.objects,r.projectList}function d(t){r.getError=!0}return t().then(e)["catch"](d)}var r=this;n(),t.clicked=function(t){var o=r.projectList.indexOf(t);return-1!==o?(e.set("project",t),!0):!1},t.addModal=function(){r.project={},t.addForm.$setPristine(),$("#add-modal").modal("show")},t.add=function(){function e(){var t=$("#project-file")[0].files[0];return d.parseUbuilditFile(r.project,t)}function a(){return o.create(r.project)}function i(t){$("#add-modal").modal("hide"),c.button("reset"),n()}function u(e){t.addForm.$invalid=!0,c.button("reset")}var c=$("#add-button").button("loading");$("#project-file").length&&$("#project-file")[0].files[0]?e().then(i)["catch"](u):a().then(i)["catch"](u)},t.deleteModal=function(t){r.deleteError=!1,r.deleted=t,$("#delete-modal").modal("show")},t["delete"]=function(){function t(){return o.remove(r.deleted)}function e(t){$("#delete-modal").modal("hide"),a.button("reset"),n()}function d(t){r.deleteError=!0,a.button("reset")}var a=$("#delete-button").button("loading");t().then(e)["catch"](d)},t.updateModal=function(e){r.updated={},r.updated.id=e.id,r.updated.name=e.name,r.updated.address=e.address,r.updated.city=e.city,r.updated.state=e.state,r.updated.zipcode=e.zipcode,r.updated.homeSq=e.home_sq,t.updateForm.$setPristine(),$("#update-modal").modal("show")},t.update=function(){function e(){return o.update(r.updated)}function d(){$("#update-modal").modal("hide"),i.button("reset"),n()}function a(){t.updateForm.$invalid=!0,i.button("reset")}var i=$("#update-button").button("loading");e().then(d)["catch"](a)}}angular.module("app.projects").controller("ProjectsController",t),t.$inject=["$scope","store","projectService","utilityService"]}();
!function(){"use strict";angular.module("app.projects",[])}();
!function(){"use strict";function t(t){t.state("projects",{url:"/projects",resolve:{User:r},views:{nav:{templateUrl:"static/angular/partials/navs/nav2.html",controller:e,controllerAs:"vm"},body:{templateUrl:"static/angular/modules/projects/projects.html",controller:"ProjectsController",controllerAs:"vm"}},data:{requiresLogin:!0}})}function r(t,r){function e(){return t.retrieve()}function n(t){return r.resolve(t.data)}function o(t){return r.reject(t)}return e().then(n)["catch"](o)}function e(t){var r=this;r.username=t.username}angular.module("app.projects").config(t)}();
!function(){"use strict";function t(t,n,e,r,i){var o=this;o.plan="free",n.remove("jwt"),t.signUp=function(){function n(){return r.createCardToken(o)}function u(t){return r.createSubscription(o,t.id)}function a(){return i.authenticate(o.username,o.password)}function c(){e.go("tutorial")}function s(){t.signupForm.$invalid=!0,p.button("reset")}var p=$("#signup-button").button("loading"),l=r.validateCard(o);l?n().then(u).then(a).then(c)["catch"](s):s()}}angular.module("app.signup").controller("SignupController",t),t.$inject=["$scope","store","$state","stripeService","authService"]}();
!function(){"use strict";angular.module("app.signup",[])}();
!function(){"use strict";function n(n){n.state("signup",{url:"/signup",views:{nav:{templateUrl:"static/angular/partials/navs/nav1.html"},body:{templateUrl:"static/angular/modules/signup/signup.html",controller:"SignupController",controllerAs:"vm"}}})}angular.module("app.signup").config(n)}();
!function(){"use strict";function t(t,e,n){function o(){function t(){function t(t){return a.subcontractorList=t.data.objects,a.subcontractorList}function e(){a.getError=!0}return n.retrieveList().then(t)["catch"](e)}return t()}var a=this;a.project=e.get("project"),o(),t.clickedCheckbox=function(t){if(t.selected)a.selected=!0;else{var e=!1;angular.forEach(a.subcontractorList,function(t){t.selected&&(e=!0)}),a.selected=e}},t.addModal=function(){a.subcontractor={},t.addForm.$setPristine(),$("#add-modal").modal("show")},t.add=function(){function e(){return n.create(a.subcontractor)}function d(){$("#add-modal").modal("hide"),c.button("reset"),o()}function r(){t.addForm.$invalid=!0,c.button("reset")}var c=$("#add-button").button("loading");e().then(d)["catch"](r)},t.deleteManyModal=function(){$("#delete-many-button1").hasClass("disabled")||(a.deleteManyError=!1,$("#delete-many-modal").modal("show"))},t.deleteMany=function(){function t(t){return n.remove(t)}function e(){$("#delete-many-modal").modal("hide"),r.button("reset"),a.selected=!1,o()}function d(){a.deleteManyError=!0,r.button("reset")}var r=$("#delete-many-button2").button("loading");angular.forEach(a.subcontractorList,function(n){n.selected&&t(n).then(e)["catch"](d)})},t.deleteModal=function(t){a.deleteError=!1,a.deleted=t,$("#delete-modal").modal("show")},t["delete"]=function(){function t(){return n.remove(a.deleted)}function e(){$("#delete-modal").modal("hide"),r.button("reset"),o()}function d(){a.deleteError=!0,r.button("reset")}var r=$("#delete-button").button("loading");t().then(e)["catch"](d)},t.updateModal=function(e){a.updated={},a.updated.id=e.id,a.updated.name=e.name,a.updated.company=e.company,a.updated.contactNumber=e.contact_number,t.updateForm.$setPristine(),$("#update-modal").modal("show")},t.update=function(){function e(){return n.update(a.updated)}function d(){$("#update-modal").modal("hide"),c.button("reset"),o()}function r(){t.updateForm.$invalid=!0,c.button("reset")}var c=$("#update-button").button("loading");e().then(d)["catch"](r)}}angular.module("app.projects.subcontractors").controller("SubcontractorsController",t),t.$inject=["$scope","store","subcontractorService"]}();
!function(){"use strict";angular.module("app.projects.subcontractors",[])}();
!function(){"use strict";function t(t){t.state("subcontractors",{url:"/projects/subcontractors",resolve:{User:r},views:{nav:{templateUrl:"static/angular/partials/navs/nav2.html",controller:n,controllerAs:"vm"},body:{templateUrl:"static/angular/modules/subcontractors/subcontractors.html",controller:"SubcontractorsController",controllerAs:"vm"}},data:{requiresLogin:!0}})}function r(t,r){function n(){return t.retrieve()}function o(t){return r.resolve(t.data)}function e(t){return r.reject(t)}return n().then(o)["catch"](e)}function n(t){var r=this;r.username=t.username}angular.module("app.projects.subcontractors").config(t)}();
!function(){"use strict";function o(){}angular.module("app.tutorial").controller("TutorialController",o)}();
!function(){"use strict";angular.module("app.tutorial",[])}();
!function(){"use strict";function t(t){t.state("tutorial",{url:"/tutorial",resolve:{User:r},views:{nav:{templateUrl:"static/angular/partials/navs/nav2.html",controller:e,controllerAs:"vm"},body:{templateUrl:"static/angular/modules/tutorial/tutorial.html",controller:"TutorialController",controllerAs:"vm"}},data:{requiresLogin:!0}})}function r(t,r){function e(){return t.retrieve()}function n(t){return r.resolve(t.data)}function a(t){return r.reject(t)}return e().then(n)["catch"](a)}function e(t){var r=this;r.username=t.username}angular.module("app.tutorial").config(t)}();